# 교육용 3D 물리 시뮬레이터 - 실행 가이드

## 🚀 프로젝트 실행하기

### 1단계: 의존성 설치

```bash
cd C:/KDT/3DS/EDU
npm install
```

**설치되는 주요 패키지:**
- React 18 + TypeScript
- Three.js, @react-three/fiber, @react-three/drei
- Zustand (상태 관리)
- Styled Components (스타일링)
- Vite (빌드 도구)

**예상 소요 시간:** 2-3분

---

### 2단계: 개발 서버 실행

```bash
npm run dev
```

**실행 결과:**
```
VITE v5.0.0  ready in 500 ms

➜  Local:   http://localhost:3000/
➜  Network: use --host to expose
```

브라우저에서 `http://localhost:3000`으로 접속하세요.

---

## 🎮 사용 방법

### 단순 모드 (기본)

1. **던지는 세기 조절**
   - 슬라이더를 움직여 1-10 사이 값 선택
   - 값이 클수록 초기 속도가 빠릅니다

2. **구종 선택**
   - 드롭다운에서 원하는 구종 선택
   - 직구, 커브, 슬라이더, 체인지업, 너클볼

3. **시뮬레이션 시작**
   - "⚾ 시뮬레이션 시작" 버튼 클릭
   - 공의 궤적이 3D로 애니메이션됩니다

4. **결과 확인**
   - 비행 시간, 최고 높이
   - 홈플레이트 도달 높이
   - 수평/수직 변화량
   - 스트라이크/볼 판정

### 전문가 모드

1. **모드 전환**
   - 우측 상단 "전문가 모드" 버튼 클릭

2. **프리셋 선택**
   - 5가지 구종 프리셋 중 선택
   - 프리셋 선택 시 해당 구종의 물리 파라미터 자동 설정

3. **시뮬레이션 실행**
   - "⚾ 시뮬레이션 시작" 버튼 클릭

### 3D 뷰 조작

- **회전**: 마우스 좌클릭 + 드래그
- **확대/축소**: 마우스 휠
- **이동**: 마우스 우클릭 + 드래그 (또는 중클릭)

---

## 📋 주요 기능

### ✅ 구현 완료

1. **물리 엔진**
   - ✅ 중력 계산
   - ✅ 항력 계산 (공기 저항)
   - ✅ 마그누스 효과 (회전으로 인한 양력)
   - ✅ Euler Method 수치 적분
   - ✅ RK4 Method 수치 적분 (선택적 사용)

2. **3D 렌더링**
   - ✅ Three.js 기반 3D 씬
   - ✅ 야구공 렌더링
   - ✅ 궤적 라인 시각화
   - ✅ 야구장 바닥 및 스트라이크 존
   - ✅ 투수판, 홈플레이트 표시
   - ✅ 카메라 컨트롤 (OrbitControls)

3. **UI/UX**
   - ✅ 단순/전문가 모드 토글
   - ✅ 던지는 세기 슬라이더 (단순 모드)
   - ✅ 구종 선택 드롭다운 (단순 모드)
   - ✅ 프리셋 선택 버튼 (전문가 모드)
   - ✅ 결과 표시 패널
   - ✅ 스트라이크/볼 판정

4. **프리셋**
   - ✅ 직구 (145 km/h, 백스핀)
   - ✅ 커브 (110 km/h, 큰 낙차)
   - ✅ 슬라이더 (130 km/h, 횡적 변화)
   - ✅ 체인지업 (125 km/h, 낮은 회전)
   - ✅ 너클볼 (100 km/h, 거의 무회전)

---

## 🔧 개발 명령어

```bash
# 개발 서버 실행
npm run dev

# 프로덕션 빌드
npm run build

# 빌드 미리보기
npm run preview

# TypeScript 타입 체크
npm run type-check

# ESLint 검사
npm run lint

# ESLint 자동 수정
npm run lint:fix
```

---

## 🐛 문제 해결

### 1. 의존성 설치 실패

**증상:**
```
npm ERR! code ERESOLVE
npm ERR! ERESOLVE unable to resolve dependency tree
```

**해결방법:**
```bash
# 캐시 삭제 후 재설치
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### 2. 타입 에러

**증상:**
```
error TS2307: Cannot find module '@/types' or its corresponding type declarations.
```

**해결방법:**
```bash
# TypeScript 설정 확인
npm run type-check

# tsconfig.json의 paths 설정 확인
# "@/*": ["./src/*"]
```

### 3. Vite 빌드 에러

**증상:**
```
[vite] Internal server error: Failed to resolve import
```

**해결방법:**
```bash
# Vite 캐시 삭제
rm -rf node_modules/.vite
npm run dev
```

### 4. Three.js 렌더링 안 됨

**증상:**
- 검은 화면만 표시됨
- 3D 객체가 보이지 않음

**해결방법:**
- 브라우저 콘솔 확인 (F12)
- WebGL 지원 여부 확인: https://get.webgl.org/
- GPU 드라이버 최신 버전으로 업데이트

### 5. 시뮬레이션 결과가 이상함

**증상:**
- 공이 땅 아래로 떨어짐
- 궤적이 비현실적

**해결방법:**
- 물리 파라미터 확인
- `src/types/index.ts`의 PHYSICS_CONSTANTS 확인
- 프리셋 데이터 확인: `src/scenarios/pitch/presets.ts`

---

## 📊 성능 최적화

### 권장 사양

**최소:**
- CPU: 듀얼 코어 2.0 GHz
- RAM: 4GB
- GPU: WebGL 지원
- 브라우저: Chrome 90+, Firefox 88+, Edge 90+

**권장:**
- CPU: 쿼드 코어 2.5 GHz 이상
- RAM: 8GB 이상
- GPU: 전용 그래픽 카드
- 브라우저: 최신 버전

### 성능 모니터링

1. 브라우저 개발자 도구 (F12) 열기
2. Performance 탭 선택
3. 녹화 시작 후 시뮬레이션 실행
4. FPS 확인 (목표: 30fps 이상)

---

## 📁 프로젝트 구조

```
EDU/
├── src/
│   ├── core/
│   │   ├── physics/          # 물리 엔진
│   │   ├── renderer/         # 3D 렌더링
│   │   └── ui/               # 공통 UI
│   ├── scenarios/pitch/      # 투구 시뮬레이터
│   ├── contexts/             # React Context
│   ├── types/                # TypeScript 타입
│   ├── App.tsx               # 메인 앱
│   ├── main.tsx              # 진입점
│   └── index.css             # 전역 스타일
├── public/                   # 정적 파일
├── docs/                     # 문서
│   ├── 작업목록.md
│   └── 실행가이드.md (이 문서)
├── package.json
├── vite.config.ts
├── tsconfig.json
└── README.md
```

---

## 🎯 다음 단계

### MVP 완료 ✅
현재 버전으로 핵심 기능이 모두 구현되었습니다.

### 향후 개선 사항 (선택)

1. **물리 정확도 향상**
   - 실제 MLB 데이터와 비교 검증
   - 공의 솔기 효과 추가
   - 바람 효과 추가

2. **UI/UX 개선**
   - 용어 설명 모달 (? 아이콘 호버)
   - 애니메이션 속도 조절
   - 다중 궤적 비교 기능

3. **추가 기능**
   - 역방향 계산 (목표 위치 → 필요한 파라미터)
   - 씬 저장/불러오기
   - 스크린샷 캡처
   - 데이터 내보내기 (CSV)

4. **다른 시나리오**
   - 타격 시뮬레이터
   - 자유낙하 실험
   - 포물선 운동

---

## 📞 지원

문제가 발생하면:
1. 브라우저 콘솔 확인 (F12)
2. `docs/작업목록.md` 참조
3. GitHub Issues에 보고

---

**마지막 업데이트**: 2025-10-16
**버전**: 1.0.0 (MVP)
