# 교육용 3D 물리 시뮬레이터 - 작업 목록

**프로젝트**: 교육용 3D 물리 시뮬레이터 (EDU)
**시작일**: 2025-10-16
**최종 업데이트**: 2025-10-16

---

## 📊 전체 진행 상황

```
Phase 1: 기반 구축          ████████████████████ 100% ✅
Phase 2: 물리 엔진          ████████████████████ 100% ✅
Phase 3: 시나리오 구조      ████████████░░░░░░░░  60% 🔄
Phase 4: 3D 렌더링          ░░░░░░░░░░░░░░░░░░░░   0% ⏳
Phase 5: UI 구현            ░░░░░░░░░░░░░░░░░░░░   0% ⏳
Phase 6: 통합 및 테스트     ░░░░░░░░░░░░░░░░░░░░   0% ⏳
```

**전체 진행률**: 약 43%

---

## ✅ Phase 1: 기반 구축 (완료)

### 1.1 프로젝트 초기 설정
- [x] **디렉토리 구조 생성**
  - `src/core/physics` - 물리 계산 엔진
  - `src/core/renderer` - 3D 렌더링
  - `src/core/ui` - 공통 UI 컴포넌트
  - `src/scenarios/pitch` - 투구 시뮬레이터
  - `src/contexts` - React Context
  - `src/types` - TypeScript 타입
  - `public/models` - 3D 모델 파일

### 1.2 설정 파일
- [x] **package.json** - 의존성 및 스크립트 정의
  - React 18, TypeScript
  - Three.js, @react-three/fiber, @react-three/drei
  - Zustand, Styled Components
  - Vite

- [x] **tsconfig.json** - TypeScript 설정
  - ES2020 타겟
  - Path alias (@/*) 설정
  - Strict mode 활성화

- [x] **vite.config.ts** - Vite 빌드 설정
  - React 플러그인
  - Path alias 해석

- [x] **.gitignore** - Git 제외 파일 설정

- [x] **index.html** - HTML 진입점

- [x] **README.md** - 프로젝트 문서

---

## ✅ Phase 2: 물리 엔진 구현 (완료)

### 2.1 타입 정의 (`src/types/index.ts`)
- [x] **Vector3** - 3D 벡터 인터페이스
- [x] **PitchParameters** - 투구 파라미터 (질량, 속도, 회전 등)
- [x] **SimulationState** - 시뮬레이션 상태
- [x] **SimulationResult** - 시뮬레이션 결과
- [x] **PitchType** - 구종 타입 (직구, 커브 등)
- [x] **PHYSICS_CONSTANTS** - 물리 상수

### 2.2 수치 적분 (`src/core/physics/integrator.ts`)
- [x] **벡터 유틸리티 함수**
  - create, clone, add, subtract, multiply, divide
  - dot, cross, length, normalize

- [x] **Euler Method** 적분기
  - 빠르고 단순한 1차 적분
  - 시간 스텝: 0.01초 (10ms)

- [x] **RK4 Method** 적분기 (구현 완료)
  - 4차 Runge-Kutta 적분
  - 높은 정확도, 선택적 사용

### 2.3 힘 계산 (`src/core/physics/forces.ts`)
- [x] **중력 계산**
  - F = m × g × [0, -1, 0]

- [x] **항력 계산**
  - F_drag = -0.5 × ρ × C_d × A × |v|² × v̂
  - 공기 저항 효과

- [x] **마그누스 효과 계산**
  - F_magnus = 0.5 × C_L × ρ × A × |v|² × (ω × v̂)
  - 회전으로 인한 양력

- [x] **총 힘 계산**
  - F_total = F_gravity + F_drag + F_magnus

### 2.4 시뮬레이터 (`src/core/physics/simulator.ts`)
- [x] **PitchSimulator 클래스**
  - 시뮬레이션 루프 구현
  - 궤적 기록
  - 최고 높이, 비행 시간 계산
  - 홈플레이트 도달 체크
  - 스트라이크 판정

- [x] **runSimulation 함수**
  - 간편한 시뮬레이션 실행
  - 옵션: dt, maxTime, useRK4

---

## 🔄 Phase 3: 투구 시나리오 구조 (진행 중 - 60%)

### 3.1 프리셋 데이터 (`src/scenarios/pitch/presets.ts`)
- [x] **5가지 구종 프리셋**
  - fastball (직구): 145 km/h, 백스핀 2400rpm
  - curveball (커브): 110 km/h, 탑스핀 2800rpm, 큰 낙차
  - slider (슬라이더): 130 km/h, 횡적 변화
  - changeup (체인지업): 125 km/h, 낮은 회전
  - knuckleball (너클볼): 100 km/h, 거의 무회전

- [x] **구종별 설명** (PITCH_DESCRIPTIONS)
- [x] **구종별 한글 이름** (PITCH_NAMES)

### 3.2 상태 관리 (`src/contexts/SimulationContext.tsx`)
- [x] **SimulationContext 생성**
  - params: 현재 파라미터
  - result: 시뮬레이션 결과
  - isSimulating: 실행 중 여부
  - uiMode: 단순/전문가 모드

- [x] **Context 액션**
  - setParams: 파라미터 수정
  - setUIMode: 모드 전환
  - setPreset: 프리셋 적용
  - setSimpleModeInputs: 단순 모드 입력 매핑
  - runSimulation: 시뮬레이션 실행
  - reset: 초기화

### 3.3 남은 작업
- [ ] **투구 메인 컴포넌트** (`PitchSimulator.tsx`)
- [ ] **입력 패널 컴포넌트** (`PitchInputPanel.tsx`)
- [ ] **3D 관련 컴포넌트**
  - Ball3D.tsx - 공 렌더링
  - TrajectoryLine.tsx - 궤적 라인

---

## ⏳ Phase 4: 3D 렌더링 컴포넌트 (미착수)

### 4.1 코어 렌더러 (`src/core/renderer/`)
- [ ] **Scene3D.tsx** - 메인 3D 씬
  - Canvas 설정
  - 조명 설정 (Ambient + Directional)
  - 카메라 설정

- [ ] **Camera.tsx** - 카메라 컨트롤
  - OrbitControls 적용
  - 줌, 회전, 패닝

- [ ] **Grid.tsx** - 그리드 헬퍼
  - 바닥 그리드
  - 좌표축 표시

### 4.2 투구 3D 컴포넌트 (`src/scenarios/pitch/`)
- [ ] **Ball3D.tsx** - 야구공 렌더링
  - Sphere geometry (반지름 0.0366m)
  - 애니메이션 로직
  - 궤적 따라 이동

- [ ] **TrajectoryLine.tsx** - 궤적 라인
  - Line geometry
  - 색상: 빨강 (진행 중) / 파랑 (완료)

- [ ] **Field.tsx** - 야구장 바닥 (선택)
  - 투수판, 홈플레이트 표시
  - 텍스처 적용

- [ ] **Pitcher.tsx** - 투수 모델 (선택)
- [ ] **Catcher.tsx** - 포수 모델 (선택)

---

## ⏳ Phase 5: UI 컴포넌트 구현 (미착수)

### 5.1 공통 UI (`src/core/ui/`)
- [ ] **ModeToggle.tsx** - 단순/전문가 모드 토글
  - 버튼 또는 탭 형태
  - 현재 모드 표시

- [ ] **TooltipModal.tsx** - 용어 설명 모달
  - [?] 아이콘에 호버 시 표시
  - 물리 용어 설명

- [ ] **ResultPanel.tsx** - 결과 표시 패널
  - 비행 시간, 최고 높이
  - 홈플레이트 도달 높이
  - 수평/수직 변화량
  - 스트라이크 판정

### 5.2 투구 UI (`src/scenarios/pitch/`)
- [ ] **PitchInputPanel.tsx** - 파라미터 입력 패널
  - 단순 모드:
    - 던지는 세기 슬라이더 (1-10)
    - 구종 선택 드롭다운
    - 목표 위치 그리드
  - 전문가 모드:
    - 초기 속도 입력 (m/s)
    - 릴리즈 각도 (degrees)
    - 회전수 (rpm)
    - 회전축 (x, y, z)
    - 환경 변수 (공기 밀도 등)

- [ ] **PresetSelector.tsx** - 프리셋 선택 UI
  - 5가지 구종 버튼
  - 프리셋 설명 표시

- [ ] **SimulationControls.tsx** - 시뮬레이션 컨트롤
  - "시뮬레이션 시작" 버튼
  - "초기화" 버튼
  - 진행 상태 표시

---

## ⏳ Phase 6: 통합 및 메인 앱 (미착수)

### 6.1 메인 진입점
- [ ] **src/main.tsx** - 앱 진입점
  - React 마운트
  - Provider 래핑

- [ ] **src/App.tsx** - 메인 앱 컴포넌트
  - SimulationProvider
  - 레이아웃 구성
  - 3D 뷰 + 입력 패널

- [ ] **src/index.css** - 기본 스타일
  - 전역 스타일
  - 폰트, 색상 팔레트

### 6.2 통합 작업
- [ ] **의존성 설치**
  ```bash
  cd EDU && npm install
  ```

- [ ] **개발 서버 실행**
  ```bash
  npm run dev
  ```

- [ ] **타입 체크**
  ```bash
  npm run type-check
  ```

---

## 📋 다음 단계 우선순위

### 즉시 진행 가능
1. **투구 시나리오 완료** (Phase 3 남은 작업)
   - PitchSimulator.tsx 메인 컴포넌트
   - 기본 레이아웃 구성

2. **3D 렌더링 시작** (Phase 4)
   - Scene3D.tsx 기본 씬
   - Ball3D.tsx 공 렌더링
   - TrajectoryLine.tsx 궤적 표시

3. **UI 구현** (Phase 5)
   - 단순 모드 입력 UI
   - 시뮬레이션 시작 버튼
   - 결과 패널

4. **메인 앱 통합** (Phase 6)
   - main.tsx, App.tsx
   - 전체 레이아웃
   - 스타일링

---

## 🎯 성공 기준

### 기능적 기준
- [ ] 사용자가 파라미터 입력 시 정확한 궤적 계산
- [ ] 중력, 항력, 마그누스 효과 모두 적용
- [ ] 단순/전문가 모드 전환 원활
- [ ] 프리셋 선택 시 즉시 적용
- [ ] 3D 시각화 부드럽게 작동 (30fps+)

### 비기능적 기준
- [ ] Chrome, Firefox, Edge 호환
- [ ] 타입 에러 0개
- [ ] ESLint 경고 0개
- [ ] 평균 30fps 이상 유지

---

## 📝 메모

### 개발 환경 설정
```bash
# EDU 디렉토리로 이동
cd C:/KDT/3DS/EDU

# 의존성 설치
npm install

# 개발 서버 실행
npm run dev

# 타입 체크
npm run type-check

# 린트 검사
npm run lint
```

### 주요 파일 위치
```
EDU/
├── src/
│   ├── core/
│   │   └── physics/
│   │       ├── integrator.ts     ✅ 완료
│   │       ├── forces.ts         ✅ 완료
│   │       └── simulator.ts      ✅ 완료
│   ├── scenarios/pitch/
│   │   ├── presets.ts            ✅ 완료
│   │   └── types.ts              ✅ 완료
│   ├── contexts/
│   │   └── SimulationContext.tsx ✅ 완료
│   ├── types/
│   │   └── index.ts              ✅ 완료
│   ├── App.tsx                   ⏳ 미착수
│   └── main.tsx                  ⏳ 미착수
├── docs/
│   └── 작업목록.md               ✅ 이 문서
└── package.json                  ✅ 완료
```

### 참고 문서
- 구현 계획서: `../3DU_구현계획.md`
- 요구사항 명세서: `../docs/요구사항_명세서_v3.txt`
- 제안서: `../docs/제안서_v3.txt`

---

**마지막 업데이트**: 2025-10-16 17:00
